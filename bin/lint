pkg-ok || exit 1

eslint --ignore-path .gitignore --ignore-pattern '!.*.js' --report-unused-disable-directives $(node $(npm explore lint-my-app -- pwd)/addconfig.js eslint) . || exit 1

stylelint --ignore-path .gitignore $(node $(npm explore lint-my-app -- pwd)/addconfig.js stylelint) "**/*.css" || exit 1
stylelint --ignore-path .gitignore $(node $(npm explore lint-my-app -- pwd)/addconfig.js stylelint) --report-needless-disables "**/*.css" || exit 1

stylelint --syntax=scss --ignore-path .gitignore $(node $(npm explore lint-my-app -- pwd)/addconfig.js stylelint) "**/*.scss" || exit 1
stylelint --syntax=scss --ignore-path .gitignore $(node $(npm explore lint-my-app -- pwd)/addconfig.js stylelint) --report-needless-disables "**/*.scss" || exit 1

git ls-files | grep "\.json$" | grep -v package | xargs -I{} jsonlint --quiet "$(pwd)/{}" || exit 1
